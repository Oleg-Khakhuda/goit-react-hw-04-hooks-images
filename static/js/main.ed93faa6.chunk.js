(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3q4yr",Modal:"Modal_Modal__jcL_H",Img:"Modal_Img__39aa-"}},13:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__KpgRB",text:"ImageGallery_text__fo2i2"}},15:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1oHqA",ImageGalleryItem__image:"ImageGalleryItem_ImageGalleryItem__image__kXvQ3"}},17:function(e,t,a){e.exports={load_more:"Button_load_more__1CTFi",Button:"Button_Button__2ObI5"}},32:function(e,t,a){e.exports={Loader:"Loader_Loader__14zLn"}},37:function(e,t,a){},40:function(e,t,a){},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__kZZBw",SearchForm:"Searchbar_SearchForm__1mHC8",SearchForm__button:"Searchbar_SearchForm__button__1ZhEk",SearchForm__button__label:"Searchbar_SearchForm__button__label__3wiiv",SearchForm__input:"Searchbar_SearchForm__input__2RB6R"}},81:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(9),o=a.n(c),s=(a(37),a(4)),i=a(11),u=(a(38),a(5)),l=a.n(u),m=a(1),h=function(e){var t=e.onSubmit,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1];return Object(m.jsx)("header",{className:l.a.Searchbar,children:Object(m.jsxs)("form",{className:l.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),o("")):i.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438!")},children:[Object(m.jsx)("button",{type:"submit",className:l.a.SearchForm__button,children:Object(m.jsx)("span",{className:l.a.SearchForm__button__label,children:"Search"})}),Object(m.jsx)("input",{className:l.a.SearchForm__input,value:c,type:"text",placeholder:"Search images and photos",onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})},_=(a(40),a(18)),b=a(15),g=a.n(b),j=function(e){var t=e.searchResult,a=e.onImageClick;return t.map((function(e){return Object(m.jsx)("li",{className:g.a.ImageGalleryItem,children:Object(m.jsx)("img",{src:e.webformatURL,alt:e.tags,className:g.a.ImageGalleryItem__image,onClick:a})},e.id)}))},f=a(16),d=a.n(f),p=a(27),O=a(28),x=a(29),y=a(30),I=a.n(y),v=function(){function e(){Object(O.a)(this,e),this.base_url="https://pixabay.com/api/",this.api_key="22572278-f825929a97bc5f7e53341dcc7",this._searchQuery="",this._page=1,this._perPage=12}return Object(x.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"searchImages",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.base_url,"?q=").concat(this._searchQuery,"&page=").concat(this.page,"&key=").concat(this.api_key,"&image_type=photo&orientation=horizontal&per_page=").concat(this._perPage),e.prev=1,e.next=4,I.a.get(t);case 4:return a=e.sent,r=a.data.hits,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),S=a(17),k=a.n(S),w=function(e){var t=e.onClick;return Object(m.jsx)("div",{className:k.a.load_more,children:Object(m.jsx)("button",{className:k.a.Button,type:"button",onClick:t,children:"Load more"})})},F=(a(60),a(31)),N=a.n(F),G=a(32),L=a.n(G),C=function(){return Object(m.jsx)(N.a,{className:L.a.Loader,type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})},B=a(12),E=a.n(B),M=function(e){var t=e.toggleModal,a=e.bigImg;Object(r.useEffect)((function(){return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}));var n=function(e){"Escape"===e.code&&t()};return Object(m.jsx)("div",{onClick:function(e){e.currentTarget===e.target&&t()},className:E.a.Overlay,children:Object(m.jsx)("div",{className:E.a.Modal,children:Object(m.jsx)("img",{className:E.a.Img,src:a.largeImageURL,alt:a.tags})})})},R=a(13),Q=a.n(R),H=new v,P=function(e){var t=e.searchImageName,a=e.scroll,n=Object(r.useState)([]),c=Object(s.a)(n,2),o=c[0],i=c[1],u=Object(r.useState)("idle"),l=Object(s.a)(u,2),h=l[0],b=l[1],g=Object(r.useState)(null),f=Object(s.a)(g,2),d=f[0],p=f[1],O=Object(r.useState)(!1),x=Object(s.a)(O,2),y=x[0],I=x[1];Object(r.useEffect)((function(){t.trim()&&(b("pending"),H.resetPage(),H.searchQuery=t,H.searchImages().then((function(e){b("success"),i(e)})).catch((function(e){b("error")})))}),[t,i]);var v=function(){I(!y)};return"idle"===h?Object(m.jsx)("p",{className:Q.a.text,children:"Hello! Enter the name of the picture"}):"pending"===h?Object(m.jsx)(C,{}):"success"===h?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:Q.a.ImageGallery,children:Object(m.jsx)(j,{searchResult:o,onImageClick:function(e){e.preventDefault();var t=e.target.src;p(o.find((function(e){return e.webformatURL===t}))),v()}})}),Object(m.jsx)(w,{onClick:function(){H.page=1,H.searchImages().then((function(e){i((function(t){return[].concat(Object(_.a)(t),Object(_.a)(e))})),b("success"),a()})).catch((function(e){b("error")}))}}),y&&Object(m.jsx)(M,{toggleModal:v,bigImg:d})]}):"error"===h?Object(m.jsx)("p",{className:Q.a.text,children:"Something went wrong"}):void 0},T=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h,{onSubmit:function(e){n(e)}}),Object(m.jsx)(P,{searchImageName:a,scroll:function(){window.scrollTo({top:document.documentElement.offsetHeight,behavior:"smooth"})}}),Object(m.jsx)(i.a,{autoClose:3e3})]})};o.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(T,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.ed93faa6.chunk.js.map